# 常见错误码

## 130602

### 描述

创建标注任务出错

### 建议处理方式

1. 确认标注系统是否正常运行；

2. 确认在 ymir/.env 中正确配置了 LABEL_TOOL, LABEL_TOOL_HOST_PORT, LABEL_TOOL_TOKEN

## 130603

### 描述

创建标注任务或读取标注任务时出现网络错误

### 建议处理方式

1. 确认标注系统是否正常运行；

2. 确认在 ymir/.env 中正确配置了 LABEL_TOOL, LABEL_TOOL_HOST_PORT, LABEL_TOOL_TOKEN

## 130604

### 描述

网络错误：内部组件或第三方组件通信过程中出现网络连接错误或超时。

### 建议处理方式

1. 参考 ymir-workplace/ymir-data/logs/ymir_controller.log 以获取更详细的错误信息。

## 130700

### 描述

用户工程路径不可用：YMIR 系统无法找到当前工程所对应的存储路径。

### 建议处理方式

1. 确认目录 ymir-workplace/sandbox/your-user-id/your-project-id 是否存在，权限是否足够（此目录对 root 用户需要有读写和执行权限）；

2. 若目录不存在，则在 web 上重新建立项目，并重新进行数据导入；

3. 若目录存在而权限不够，在调整完权限后，需要通过 `./ymir.sh stop & ./ymir.sh start` 重新启动 YMIR 服务。

## 160001

### 描述

命令行参数不可用：上层组件向命令行提供了错误的参数。

### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_controller.log 以获取更详细的错误日志。

## 160002

### 描述

训练集为空：在执行训练任务时，命令行检测到了空训练集。

### 建议处理方式

参考 #180002 的处理方式。

## 160003

### 描述

验证集为空：在执行训练任务时，命令行检测到了空验证集。

### 建议处理方式

参考 # 180002 的处理方式。

## 160004

### 描述

容器错误：在训练、挖掘或推理过程中，容器未给出明确错误码而意外结束。

### 建议处理方式

1. 尝试在不更改超参的情况下，再次启动任务；

2. 通过 `nvidia-smi` 检查本机 GPU 状态是否正常，如果不能访问，则进一步排查 GPU 硬件或驱动是否被正确安装；

3. 通过 `nvidia-docker <your-docker-image-name> nvidia-smi` 检查此容器是否可以访问到本机 GPU，并依据 #180101 检查镜像与 GPU 的兼容性；

3. 查询 ymir-executor-out.log 以取得更详细的错误日志，若出现 NaN 错误，依据 #180201 解决，若出现 oom 错误，依据 #180103 解决。

## 160005
### 描述

未知类型：在导入数据集与标注时，选择了 “遇到未知类型即停止” 的情况下，在标注文件中出现了未知类型。

### 建议处理方式

1. 点击类型管理，将未知类型加入当前用户的类型列表。

## 160007

### 描述

工程目录脏，需要清理：创建任务时，系统发现当前工程目录中有完全提交的数据，或者工程目录中出现了其他文件。

### 建议处理方式

1. 点击页面上的清理按钮。

## 160008
### 描述

数据集合并错误：两个数据集合并时，都有相同图片，并带有各自的标注，同时选择了 “当数据重复时，中止任务”

### 建议处理方式

1. 选择不同的重复数据处理方式，并再次进行任务。

## 160009

### 描述

用户工程目录不可用。

### 建议处理方式

1. 依据 #130700 处理

## 160011

### 描述

无结果生成：镜像在训练、挖掘和推理时，没有生成结果文件：

1. 训练任务没有生成模型说明文件

2. 挖掘任务没有生成 topk 结果文件

3. 推理任务没有生成推理结果文件

### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_controller.log，确认本次任务的容器已经成功启动；

2. 检查 ymir-executor-out.log，以获取更进一步的错误日志；

3. 若 ymir-executor-out.log 没有任何输出，且容器的执行时间极短，则有可能在打包任务镜像时没有指定 entry point，联系镜像作者解决此问题。

## 160015

### 描述

模型包解析失败：在挖掘或推理时，YMIR 无法解析指定的模型包文件。

### 建议处理方式

1. 从 ymir-workplace/ymir-data/logs/ymir_controller.log 获取更详细的出错信息。

## 160016

### 描述

数据集解析失败：

1. 在导入数据集时，无法解析外部数据集或其标注

2. 

### 建议处理方式

## xxxxxx
### 描述
### 建议处理方式

## xxxxxx
### 描述
### 建议处理方式

## 180001

### 描述

配置文件错误：在训练、挖掘或推理过程中，提供给镜像的配置文件不可用，可能原因如下：

1. 配置文件不存在；

2. 配置文件缺少必要参数项；

3. 配置文件中某些参数设置不合理。

### 建议处理方式

1. 尝试在不添加、删除或更改超参的情况下，再次启动此任务；

2. 若可以启动成功，则说明是在创建任务时更改超参导致的错误，请参考镜像日志输出文件 ymir-executor-out.log 以获取更详细的错误日志。

## 180002

### 描述

数据集错误：在训练，挖掘或推理过程中，无法读取数据集信息，可能原因如下：

1. 训练任务中的训练集或验证集中不包含任何图像；

2. 挖掘或推理任务中的数据集不包含任何图像；

3. 数据集的标注文件格式不对，或缺少必要的键值对。

### 建议处理方式

1. 检查启动任务时所使用的数据集是否包含图像；

2. 如果是训练任务出错，确认训练任务使用的训练集与验证集是否存在一个数据集是另一个数据集的子集的情况；

    * 如果验证集是训练集的子集，在创建训练任务的时候就不能选择“将重复数据全部用于训练”，反之亦然。

3. 如果是训练任务出错，确认在创建任务时未更改 export_format 参数；

4. 参考容器日志输出文件 ymir-executor-out.log 以获取更详细的错误日志。

## 180003

### 描述

图像格式错误：在训练、挖掘与推理任务过程中，容器无法读取某张图像。

### 建议处理方式

1. 参考容器日志输出文件 ymir-executor-out.log 以获取更详细的错误日志，并排除未知格式的图片。

## 180004

### 描述

模型错误：在训练、挖掘或推理过程中，容器无法读取或加载模型。

### 建议处理方式

1. 尽量使用与训练镜像对应的推理与挖掘镜像进行挖掘与推理，不同镜像之间的模型一般不能互通；

## 180101

### 描述

CUDA 版本与 GPU 驱动版本不兼容。

### 建议处理方式

1. 使用 `nvidia-smi` 命令，确定当前 GPU 的版本；

2. 确认当前镜像使用的 CUDA 版本：

    * 所有 YMIR 官方镜像会在 tag 上写明其使用的 CUDA 版本；

    * 如果是第三方镜像，可以使用 `nvidia-docker run <your-docker-image-name> nvidia-smi` 查看其 CUDA 版本。

3. [查询 CUDA 版本与 GPU 驱动版本的兼容性](https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html#cuda-toolkit-major-component-versions)，并使用与当前 GPU 驱动版本兼容的镜像，重新启动任务。

## 180102

### 描述

未找到 GPU：训练、挖掘或推理镜像无法获得 GPU。

### 建议处理方式

1. 选择一块或多块 GPU 开始任务；

2. 若无法选择 GPU，检查 GPU 和驱动是否正确安装；

3. 检查 ymir/.env 文件中的 SERVER_RUNTIME 是否被正确地设置为 nvidia；

4. 若以上两步做了修改，重启 YMIR 服务，并再次开始任务。

## 180103

### 描述

内存或显存不足：在训练，挖掘或推理任务执行过程中，容器无法获得足够的内存或显存。

### 建议处理方式

1. 检查内存或显存的占用情况，关闭当前大量占用内存或显存的其他任务，并再次启动当前任务。

## 180201

### 描述

NaN 错误：训练过程中，某个关键度量指标（通常是 loss）出现 not a number 错误。

### 建议处理方式

1. 如果是目标检测的训练任务，检查标注中是否出现大小为零或者为负值的目标框；

2. 如果是语义分割或实例分割的训练任务，检查标注中是否出现大小为零的 mask 或多边形区域。

## 180301

### 描述

网络错误：镜像通过网络拉取信息信息（通常是预训练模型）失败。

### 建议处理方式

1. 请确认本机与 internet 的网络连接是否可用。

## Q&A

### 如何定位任务的工作目录

### 如何查看任务的镜像日志
