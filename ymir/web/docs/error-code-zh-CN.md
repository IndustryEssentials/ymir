# 常见错误码

## ymir-controller

### 130602

#### 描述

创建标注任务出错

#### 建议处理方式

1. 确认标注系统是否正常运行；

2. 确认在 ymir/.env 中正确配置了 LABEL_TOOL, LABEL_TOOL_HOST_PORT, LABEL_TOOL_TOKEN

### 130603

#### 描述

创建标注任务或读取标注任务时出现网络错误

#### 建议处理方式

1. 确认标注系统是否正常运行；

2. 确认在 ymir/.env 中正确配置了 LABEL_TOOL, LABEL_TOOL_HOST_PORT, LABEL_TOOL_TOKEN

### 130604

#### 描述

网络错误：内部组件或第三方组件通信过程中出现网络连接错误或超时。

#### 建议处理方式

1. 参考 ymir-workplace/ymir-data/logs/ymir_controller.log 以获取更详细的错误信息。

### 130700

#### 描述

用户工程路径不可用：YMIR 系统无法找到当前工程所对应的存储路径。

#### 建议处理方式

1. 确认目录 ymir-workplace/sandbox/your-user-id/your-project-id 是否存在，权限是否足够（此目录对 root 用户需要有读写和执行权限）；

2. 若目录不存在，则在 web 上重新建立项目，并重新进行数据导入；

3. 若目录存在而权限不够，在调整完权限后，需要通过 `./ymir.sh stop & ./ymir.sh start` 重新启动 YMIR 服务。

## ymir-command

### 160001

#### 描述

命令行参数不可用：上层组件向命令行提供了错误的参数。

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_controller.log 以获取更详细的错误日志。

### 160002

#### 描述

训练集为空：在执行训练任务时，命令行检测到了空训练集。

#### 建议处理方式

参考 #300002 的处理方式。

### 160003

#### 描述

验证集为空：在执行训练任务时，命令行检测到了空验证集。

#### 建议处理方式

参考 ## 300002 的处理方式。

### 160004

#### 描述

容器错误：在训练、挖掘或推理过程中，容器未给出明确错误码而意外结束。

#### 建议处理方式

1. 尝试在不更改超参的情况下，再次启动任务；

2. 通过 `nvidia-smi` 检查本机 GPU 状态是否正常，如果不能访问，则进一步排查 GPU 硬件或驱动是否被正确安装；

3. 通过 `nvidia-docker <your-docker-image-name> nvidia-smi` 检查此容器是否可以访问到本机 GPU，并依据 #300101 检查镜像与 GPU 的兼容性；

3. 查询 ymir-executor-out.log 以取得更详细的错误日志，若出现 NaN 错误，依据 #300201 解决，若出现 oom 错误，依据 #300103 解决。

### 160005

#### 描述

未知类型：在导入数据集与标注时，选择了 “遇到未知类型即停止” 的情况下，在标注文件中出现了未知类型。

#### 建议处理方式

1. 点击类型管理，将未知类型加入当前用户的类型列表。

### 160007

#### 描述

工程目录脏，需要清理：创建任务时，系统发现当前工程目录中有完全提交的数据，或者工程目录中出现了其他文件。

#### 建议处理方式

1. 点击页面上的清理按钮。

### 160008
#### 描述

数据集合并错误：两个数据集合并时，都有相同图片，并带有各自的标注，同时选择了 “当数据重复时，中止任务”

#### 建议处理方式

1. 选择不同的重复数据处理方式，并再次进行任务。

### 160009

#### 描述

用户工程目录不可用。

#### 建议处理方式

1. 依据 #130700 处理

### 160011

#### 描述

无结果生成：镜像在训练、挖掘和推理时，没有生成结果文件：

1. 训练任务没有生成模型说明文件

2. 挖掘任务没有生成 topk 结果文件

3. 推理任务没有生成推理结果文件

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_controller.log，确认本次任务的容器已经成功启动；

2. 检查 ymir-executor-out.log，以获取更进一步的错误日志；

3. 若 ymir-executor-out.log 没有任何输出，且容器的执行时间极短，则有可能在打包任务镜像时没有指定 ENTRYPOINT，联系镜像作者解决此问题。

### 160015

#### 描述

模型包解析失败：在挖掘或推理时，YMIR 无法解析指定的模型包文件。

#### 建议处理方式

1. 从 ymir-workplace/ymir-data/logs/ymir_controller.log 获取更详细的出错信息。

### 160016

#### 描述

数据集解析失败：

1. 在导入数据集时，图像或标注目录没有读取权限，或找不到数据集索引文件；

2. 在导入数据集时，标注文件缺少关键数据（例如 voc 标注缺少 bndbox，coco 标注缺少 annotations 等）

#### 建议处理方式

1. 根据数据导入页面上的说明文字及图示检查待导入数据集的可用性。

### 160019

#### 描述

nvidia-docker 权限不够。

#### 建议处理方式

1. 检查 nvidia-docker 是否有可执行权限

### 169999

#### 描述

命令行发生未知错误

#### 建议处理方式

1. 通过 ymir-workplace/ymir-data/logs/ymir_controller.yaml 获得更详细的报错信息。

## executors

### 300001

#### 描述

配置文件错误：在训练、挖掘或推理过程中，提供给镜像的配置文件不可用，可能原因如下：

1. 配置文件不存在；

2. 配置文件缺少必要参数项；

3. 配置文件中某些参数设置不合理。

#### 建议处理方式

1. 尝试在不添加、删除或更改超参的情况下，再次启动此任务；

2. 若可以启动成功，则说明是在创建任务时更改超参导致的错误，请参考镜像日志输出文件 ymir-executor-out.log 以获取更详细的错误日志。

### 300002

#### 描述

数据集错误：在训练，挖掘或推理过程中，无法读取数据集信息，可能原因如下：

1. 训练任务中的训练集或验证集中不包含任何图像；

2. 挖掘或推理任务中的数据集不包含任何图像；

3. 数据集的标注文件格式不对，或缺少必要的键值对。

#### 建议处理方式

1. 检查启动任务时所使用的数据集是否包含图像；

2. 如果是训练任务出错，确认训练任务使用的训练集与验证集是否存在一个数据集是另一个数据集的子集的情况；

    * 如果验证集是训练集的子集，在创建训练任务的时候就不能选择“将重复数据全部用于训练”，反之亦然。

3. 如果是训练任务出错，确认在创建任务时未更改 export_format 参数；

4. 参考容器日志输出文件 ymir-executor-out.log 以获取更详细的错误日志。

### 300003

#### 描述

图像格式错误：在训练、挖掘与推理任务过程中，容器无法读取某张图像。

#### 建议处理方式

1. 参考容器日志输出文件 ymir-executor-out.log 以获取更详细的错误日志，并排除未知格式的图片。

### 300004

#### 描述

模型错误：在训练、挖掘或推理过程中，容器无法读取或加载模型。

#### 建议处理方式

1. 尽量使用与训练镜像对应的推理与挖掘镜像进行挖掘与推理，不同镜像之间的模型一般不能互通；

### 300101

#### 描述

CUDA 版本与 GPU 驱动版本不兼容。

#### 建议处理方式

1. 使用 `nvidia-smi` 命令，确定当前 GPU 的版本；

2. 确认当前镜像使用的 CUDA 版本：

    * 所有 YMIR 官方镜像会在 tag 上写明其使用的 CUDA 版本；

    * 如果是第三方镜像，可以使用 `nvidia-docker run <your-docker-image-name> nvidia-smi` 查看其 CUDA 版本。

3. [查询 CUDA 版本与 GPU 驱动版本的兼容性](https://docs.nvidia.com/cuda/cuda-toolkit-release-notes/index.html#cuda-toolkit-major-component-versions)，并使用与当前 GPU 驱动版本兼容的镜像，重新启动任务。

### 300102

#### 描述

未找到 GPU：训练、挖掘或推理镜像无法获得 GPU。

#### 建议处理方式

1. 选择一块或多块 GPU 开始任务；

2. 若无法选择 GPU，检查 GPU 和驱动是否正确安装；

3. 检查 ymir/.env 文件中的 SERVER_RUNTIME 是否被正确地设置为 nvidia；

4. 若以上两步做了修改，重启 YMIR 服务，并再次开始任务。

### 300103

#### 描述

内存或显存不足：在训练，挖掘或推理任务执行过程中，容器无法获得足够的内存或显存。

#### 建议处理方式

1. 检查内存或显存的占用情况，关闭当前大量占用内存或显存的其他任务，并再次启动当前任务。

### 300201

#### 描述

NaN 错误：训练过程中，某个关键度量指标（通常是 loss）出现 not a number 错误。

#### 建议处理方式

1. 如果是目标检测的训练任务，检查标注中是否出现大小为零或者为负值的目标框；

2. 如果是语义分割或实例分割的训练任务，检查标注中是否出现大小为零的 mask 或多边形区域。

### 300301

#### 描述

网络错误：镜像通过网络拉取信息信息（通常是预训练模型）失败。

#### 建议处理方式

1. 请确认本机与 Internet 的网络连接是否可用。

## ymir-app

### 110101

#### 描述

未知接口错误

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_app.log 以获得更详细的出错信息。

### 110102

#### 描述

请求参数错误

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_app.log 以获得更详细的出错信息。

### 110103

#### 描述

未知错误

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_app.log 以获得更详细的出错信息。

### 110104

#### 描述

JWT 失效

#### 建议处理方式

1. 请点击页面右上角的退出登录按钮，并重新登录。

### 110105

#### 描述

请求参数缺少必要字段

#### 建议处理方式

1. 请检查请求参数。

### 110106

#### 描述

ymir-controller 组件错误

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_controller.log 以获得更详细的出错信息。

### 110107

#### 描述

账号或密码错误

#### 建议处理方式

1. 请检查用户名和密码，并重新登录。

### 110108

#### 描述

无法下载文件

#### 建议处理方式

1. 请检查提供的 URL 是否可用，并确认 ymir 服务可以访问到此 URL。

### 110109

#### 描述

配置错误

#### 建议处理方式

1. 请检查 .env 文件中的对应配置

### 110110

#### 描述

权限不足

#### 建议处理方式

1. 请使用管理员账号重试

### 110111

#### 描述

无法删除被保护的资源

#### 建议处理方式

1. 请确保要删除的资源没有被项目和迭代使用

### 110112

#### 描述

系统版本冲突

#### 建议处理方式

1. 请重新输入用户名和密码，并点击登录按钮

### 110113

#### 描述

系统无法发送邮件

#### 建议处理方式

1. 请联系管理员更新邮箱配置

### 110201

#### 描述

用户不存在

#### 建议处理方式

1. 请重新注册

### 110202

#### 描述

用户名重复

#### 建议处理方式

1. 请更新用户名

### 110203

#### 描述

无法访问用户信息

#### 建议处理方式

1. 请使用管理员账号登录并重试

### 110204

#### 描述

用户未登录

#### 建议处理方式

1. 请重新登录

### 110205

#### 描述

用户没有管理员权限

#### 建议处理方式

1. 请向超级管理员申请管理员权限

### 110206

#### 描述

用户已被注销

#### 建议处理方式

1. 请联系超级管理员重新激活账号

### 110207

#### 描述

用户权限不足

#### 建议处理方式

1. 请联系超级管理员配置权限

### 110209

#### 描述

用户手机号重复

#### 建议处理方式

1. 请更新手机号

### 110401

#### 描述

数据集不存在

#### 建议处理方式

1. 请确保数据集未被删除

### 110402

#### 描述

数据集名称重复

#### 建议处理方式

1. 请重新配置数据集名称

### 110403

#### 描述

没有访问数据集的权限

#### 建议处理方式

1. 请访问自己的数据集

### 110404

#### 描述

无法创建数据集

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_app.log 以及 ymir_controller.log 以获取更详细的出错信息

### 110405

#### 描述

无法删除受保护的数据集

#### 建议处理方式

1. 请确保数据集未被项目和迭代使用

### 110406

#### 描述

数据集不在同一个数据集组

#### 建议处理方式

1. 请保证选中的数据集属于同一个组

### 110407

#### 描述

上传的数据集压缩包结构错误

#### 建议处理方式

1. 请检查压缩包内文件结构

### 110408

#### 描述

无法导入数据集

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_app.log 以获得更详细的错误信息

### 110409

#### 描述

数据集不是有效的压缩包

#### 建议处理方式

1. 请检查数据集是有效的 zip 压缩文件

### 110501

#### 描述

图像不存在

#### 建议处理方式

1. 请检查图像是否已被成功导入

### 110601

#### 描述

模型不存在

#### 建议处理方式

1. 请确保模型存在且未被删除

### 110602

#### 描述

模型名称重复

#### 建议处理方式

1. 请更换模型名称

### 110603

#### 描述

没有访问模型的权限

#### 建议处理方式

1. 请访问自己的模型

### 110604

#### 描述

无法创建模型

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_app.log 以获得更详细的错误信息

### 110605

#### 描述

模型仍在处理中

#### 建议处理方式

1. 请稍后重试

### 110701

#### 描述

任务不存在

#### 建议处理方式

1. 请确保任务 id 存在

### 110702

#### 描述

任务名称重复

#### 建议处理方式

1. 请使用其他任务名称

### 110703

#### 描述

没有访问任务的权限

#### 建议处理方式

1. 请访问自己的任务

### 110704

#### 描述

无法创建任务

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_controller.log 以获得更详细的错误信息

### 110705

#### 描述

更新任务的消息已过期

#### 建议处理方式

1. 过期的消息会自动忽略，不需要用户进行任何处理

### 110706

#### 描述

无法更新任务状态

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_app.log 以及 ymir_crontab_monitor.log 以获得更详细的错误信息

### 110707

#### 描述

无法终止任务

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_controller.log 以获得更详细的错误信息

### 110708

#### 描述

LabelStudio 不支持分割标注任务

#### 建议处理方式

1. 请使用 LabelFree 标注分割数据集

### 110901

#### 描述

无法调用推理服务

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_controller.log 以获得更详细的错误信息

### 110902

#### 描述

推理配置错误

#### 建议处理方式

1. 请检查推理配置

### 110903

#### 描述

推理返回结果结构异常

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_app.log 以及 ymir_controller.log 以获得更详细的错误信息

### 111001

#### 描述

类别名称重复

#### 建议处理方式

1. 在类别管理中去除重复的类别名称

### 111101

#### 描述

镜像已存在

#### 建议处理方式

1. 无须处理

### 111102

#### 描述

镜像不存在

#### 建议处理方式

1. 进入我的镜像页面；

2. 检查此镜像是否成功完成导入；

3. 检查此镜像的类型（目标检测、语义分割或实例分割）是否与当前项目的类型相同。

### 111104

#### 描述

镜像已经配置关联

#### 建议处理方式

1. 请先解除已有关联再配置新的关联

### 111201

#### 描述

无法获取系统信息

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_controller.log 以获取更详细的错误信息

### 111401

#### 描述

项目不存在

#### 建议处理方式

1. 请确保项目存在且未被删除

### 111402

#### 描述

项目名称重复

#### 建议处理方式

1. 请使用其他项目名称

### 111403

#### 描述

无法创建项目

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_controller.log 以获取更详细的错误信息

### 111502

#### 描述

数据集组名称重复

#### 建议处理方式

1. 请使用其他数据集名称


### 111601

#### 描述

模型组不存在

#### 建议处理方式

1. 请确保模型组存在且未被删除

### 111602

#### 描述

模型组名称重复

#### 建议处理方式

1. 请使用其他模型组名称

### 111705

#### 描述

迭代步骤不存在

#### 建议处理方式

1. 请确保迭代已经正确开启

### 111706

#### 描述

迭代步骤已结束

#### 建议处理方式

1. 无须操作

### 111707

#### 描述

迭代重复

#### 建议处理方式

1. 请重新创建迭代

### 111801

#### 描述

无法导入模型

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_app.log 以及 ymir_controller.log 以获取更详细的出错信息

### 111901

#### 描述

无法同时执行删除和恢复

#### 建议处理方式

1. 无须操作

### 111902

#### 描述

无法进行模型评估

#### 建议处理方式

1. 确认此数据集的图片数量在 5 万张以下；

2. 确认此数据集的类别数量在 20 个以下；

3. 确认此数据集的 ground truth 和 prediction 均为非空；

4. 检查 ymir-workplace/ymir-data/logs/ymir_controller.log 以获取更详细的出错信息。

### 111903

#### 描述

数据集评估失败

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_controller.log 以获取更详细的出错信息。

### 111904

#### 描述

批量操作请求缺少具体的操作动词

#### 建议处理方式

1. 请检查请求参数

### 111905

#### 描述

数据集没有标注无法进行评估

#### 建议处理方式

1. 请更换有标注的数据集

### 111906

#### 描述

数据集尚未处理完成

#### 建议处理方式

1. 请稍后重试

### 112101

#### 描述

viewer 错误

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_viewer.log 以获取更详细的出错信息

### 112102

#### 描述

无法解析 viewer 的返回值

#### 建议处理方式

1. 检查 ymir-workplace/ymir-data/logs/ymir_viewer.log 以获取更详细的出错信息

### 112103

#### 描述

viewer 超时

#### 建议处理方式

1. 请检查 viewer 服务状态并重试

### 113001

#### 描述

推理结果不存在

#### 建议处理方式

1. 请确保推理结果存在且未被删除
